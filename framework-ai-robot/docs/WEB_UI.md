# AI机器人 Web界面使用指南

## 📖 概述

AI机器人服务提供了一套完整的Web界面，包括：
- **欢迎页面** - 服务介绍和快速开始
- **登录页面** - 用户身份验证
- **对话页面** - 智能对话交互界面

所有页面都是响应式设计，支持桌面和移动设备访问。

## 🚀 快速访问

### 服务启动后访问

确保AI机器人服务已启动：

```bash
# 查看服务状态
docker-compose ps ai-robot

# 如果未启动，执行启动命令
docker-compose up -d ai-robot
```

### 访问地址

| 页面 | 地址 | 说明 |
|------|------|------|
| 欢迎页 | http://localhost:8083/ | 服务首页 |
| 登录页 | http://localhost:8083/login.html | 用户登录 |
| 对话页 | http://localhost:8083/chat.html | 智能对话界面 |
| API文档 | http://localhost:8083/doc.html | Knife4j接口文档 |

## 🔐 登录系统

### 测试账号

系统预置了以下测试账号：

| 用户名 | 密码 | 角色 |
|--------|------|------|
| admin | 123456 | 管理员 |
| user | 123456 | 普通用户 |

### 登录流程

1. **访问登录页**
   ```
   http://localhost:8083/login.html
   ```

2. **输入凭证**
   - 输入用户名和密码
   - 点击"登录"按钮

3. **自动跳转**
   - 登录成功后自动跳转到对话页面
   - Token自动保存在浏览器本地存储中

### 认证机制

- 使用JWT Token进行身份验证
- Token有效期：7天（604800秒）
- Token存储在LocalStorage中
- 每次API请求自动携带Token

## 💬 使用对话界面

### 界面布局

```
┌─────────────────────────────────────────────┐
│  侧边栏         │      主对话区              │
│                │                            │
│  用户信息      │      聊天标题              │
│  ┌──────────┐ │  ┌──────────────────────┐ │
│  │ 机器人1  │ │  │                      │ │
│  │ 机器人2  │ │  │   消息显示区域       │ │
│  │ 机器人3  │ │  │                      │ │
│  └──────────┘ │  └──────────────────────┘ │
│                │  ┌──────────────────────┐ │
│  [退出登录]    │  │   输入框   [发送]    │ │
│                │  └──────────────────────┘ │
└─────────────────────────────────────────────┘
```

### 功能说明

#### 1. 选择机器人

- 左侧显示所有可用的AI机器人
- 点击机器人卡片即可选中
- 当前选中的机器人会高亮显示
- 每个机器人有独特的头像、名称和描述

**预置机器人**：
- 🤖 **通用助手** - 适合日常对话和问答
- 💻 **代码助手** - 专注编程和技术问题
- ✍️ **写作助手** - 文案创作和写作辅助

#### 2. 发送消息

**方式一：点击发送按钮**
```
1. 在输入框中输入消息
2. 点击"发送"按钮
```

**方式二：键盘快捷键**
```
- Enter: 发送消息
- Shift+Enter: 换行
```

**输入框特性**：
- 支持多行输入
- 自动高度调整
- 最大高度150px，超出后滚动
- 发送后自动清空

#### 3. 查看消息

**消息样式**：
- 用户消息：右侧，紫色渐变背景
- AI回复：左侧，白色背景
- 每条消息显示发送时间
- 支持长文本自动换行

**输入指示器**：
- AI思考时显示三个跳动的点
- 模拟真实的等待体验

#### 4. 会话管理

**会话特性**：
- 每次对话自动创建会话
- 会话ID自动保存
- 支持上下文记忆（最近10条消息）
- 切换机器人会创建新会话

#### 5. 退出登录

- 点击左下角"退出登录"按钮
- 确认后清除本地Token
- 自动跳转到登录页面

## 🎨 界面特性

### 响应式设计

- 自适应不同屏幕尺寸
- 移动端友好
- 流畅的动画效果

### 用户体验

- **Loading状态**：按钮和输入框状态变化
- **错误提示**：友好的错误信息显示
- **动画效果**：平滑的过渡和反馈
- **输入指示器**：AI思考时的视觉反馈

### 主题颜色

- 主色调：紫色渐变 (#667eea → #764ba2)
- 成功色：绿色 (#4caf50)
- 警告色：黄色 (#ffc107)
- 错误色：红色 (#c33)

## 🔧 技术实现

### 前端技术栈

- **HTML5** - 语义化标签
- **CSS3** - 现代样式和动画
- **JavaScript (ES6+)** - 原生JavaScript，无框架依赖
- **Fetch API** - 异步HTTP请求

### 数据存储

```javascript
// LocalStorage存储的数据
{
  "token": "用户认证Token",
  "username": "用户名",
  "userId": "用户ID"
}
```

### API调用

```javascript
// 登录API
POST http://localhost:8081/api/auth/login
Content-Type: application/json
{
  "username": "admin",
  "password": "123456"
}

// 获取机器人列表
GET http://localhost:8083/api/ai/robot/public

// 发送消息
POST http://localhost:8083/api/ai/chat/send
Authorization: Bearer {token}
Content-Type: application/json
{
  "robotId": "1",
  "conversationId": "...",
  "message": "你好"
}
```

## ⚠️ 注意事项

### 当前限制

1. **AI功能**
   - 目前返回模拟响应
   - 等Spring AI 1.0.0正式版后恢复

2. **浏览器兼容性**
   - 推荐使用Chrome、Firefox、Safari、Edge最新版
   - 需要支持ES6+和Fetch API

3. **网络要求**
   - 需要能够访问localhost:8083（AI机器人服务）
   - 需要能够访问localhost:8081（认证服务）

### 安全建议

1. **生产环境**
   - 修改默认密码
   - 使用HTTPS
   - 配置CORS策略

2. **Token管理**
   - 定期更新Token
   - 不要在公共环境保持登录
   - 及时退出登录

## 🐛 常见问题

### Q1: 登录后显示"网络错误"

**原因**：无法连接到认证服务

**解决方案**：
```bash
# 检查认证服务是否启动
docker-compose ps auth

# 启动认证服务
docker-compose up -d auth
```

### Q2: 机器人列表加载失败

**原因**：AI机器人服务未启动或数据库未初始化

**解决方案**：
```bash
# 检查服务状态
docker-compose ps ai-robot

# 检查数据库
docker exec my-framework-mysql mysql -uroot -proot -e "USE ai_robot; SELECT * FROM ai_robot;"
```

### Q3: 无法发送消息

**原因**：Token过期或未选择机器人

**解决方案**：
- 重新登录获取新Token
- 确认已选择机器人（左侧机器人高亮）

### Q4: 消息发送后无响应

**原因**：API服务异常

**解决方案**：
```bash
# 查看服务日志
docker-compose logs -f ai-robot

# 测试API
curl http://localhost:8083/actuator/health
```

## 📸 界面预览

### 欢迎页面
- 渐变背景
- 功能介绍
- 快速开始按钮

### 登录页面
- 简洁的登录表单
- 测试账号提示
- 实时错误提示

### 对话页面
- 两栏布局
- 机器人选择区
- 实时对话显示
- 友好的输入界面

## 🔗 相关链接

- [部署指南](./DEPLOYMENT.md)
- [API文档](./API.md)
- [项目README](../README.md)
- [故障排除](../TROUBLESHOOTING.md)

## 📞 技术支持

如遇问题：
1. 查看浏览器控制台错误信息
2. 查看服务日志：`docker-compose logs ai-robot`
3. 检查网络连接和服务状态
4. 参考常见问题解答

---

**更新时间**: 2025-10-30
**版本**: 1.0.0

